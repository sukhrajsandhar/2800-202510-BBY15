<%- include('templates/header.ejs', { cssFiles: ['booked.css'] }) %>

<body>
  <main
  class="main">
            <div class="three">
                <h1 class="text-center text-black mt-2">Your Campsites</h1>
            </div>
  
  <div class="d-flex justify-content-center">
    <ul class="nav nav-tabs" id="myTab">
      <li class="nav-item">
        <button class="nav-link active" id="booked-tab" data-bs-toggle="tab" data-bs-target="#booked" type="button"
          aria-controls="booked" aria-selected="true">
          <div class="tent"><label>Booked</label></div>
        </button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button"
          aria-controls="pending" aria-selected="false">
          <div class="tent"><label>Pending</label></div>
        </button>
      </li>
    </ul>
  </div>

  <div class="tab-content p-4">
    <!-- Booked Tab -->
    <div class="tab-pane fade show active" id="booked" aria-labelledby="booked-tab">
      <div class="d-flex flex-column align-items-center">
        <h3 class="text-center mb-4">Your Upcoming Events</h3>
        <% if (campsite) { %>
          <div class="card card-hover rounded-4 img-fluid mt-4" style="width:300px">
            <img class="card-img-top" src="<%= campsite.imageUrl || '/camp.png' %>" alt="Card image" style="width:100%">
            <div class="card-img-overlay">
              <h4 class="card-title text-white mt-3 mb-4"><%= campsite.name %></h4>
              <ul class="list-group list-group-flush rounded rounded-2">
                <li class="list-group-item">
                  <span class="material-icons material-symbols-outlined">date_range</span>
                  Date: <%= campsite.date %>
                </li>
                <li class="list-group-item">           
                  <span class="material-icons material-symbols-outlined">camping</span>
                  Tent: <%= campsite.tents %>
                </li>
                <li class="list-group-item">
                  <span class="material-icons material-symbols-outlined">person</span>
                  People: <%= campsite.people %>
                </li>
              </ul>
              <div class="d-flex justify-content-center p-3">
                <button type="button" id="cancel1" class="btn btn-primary" data-bs-toggle="modal" 
                  data-bs-target="#modalBooked" data-campsite-id="<%= campsite.id %>">
                  Cancel Booking
                </button>
              </div>
            </div>
          </div>
        <% } else { %>
          <p>No campsites booked yet</p>
        <% } %>
      </div>
    </div>
    
    
    <!-- Modal for Booked -->
    <div class="modal fade" id="modalBooked" tabindex="-1" aria-labelledby="modalBookedLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalBookedLabel">Cancel the Booking</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Are you sure you want to cancel the booking?
          </div>
          <div class="modal-footer">
            <button type="button" id="cancel2" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" id="delete1" class="btn btn-primary">Delete</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pending Tab -->
    <div class="tab-pane fade" id="pending" aria-labelledby="pending-tab">
      <div class="d-flex flex-column align-items-center">
        <h3 class="text-center mb-4">Your Pending Approvals</h3>
            <div class="card img-fluid card-hover rounded-4 mt-4" style="width:300px">
              <img class="card-img-top rounded-4" src="<%= campsite.imageUrl || './public/camp2.png' %>" alt="Card image" style="width:100%">
              <div class="card-img-overlay">
                <h4 class="card-title text-white mt-3 mb-4"><%= campsite.name %></h4>
                <ul class="list-group list-group-flush bg-white rounded rounded-3">
                  <li class="list-group-item">
                    <span class="material-icons material-symbols-outlined">date_range</span>
                    Date: <%= campsite.date %>
                  </li>
                  <li class="list-group-item">           
                    <span class="material-icons material-symbols-outlined">camping</span>
                    Tent: <%= campsite.tents %></li>
                  <li class="list-group-item">
                    <span class="material-icons material-symbols-outlined">person</span>
                    People: <%= campsite.people %></li>
                </ul>
                <div class="d-flex justify-content-center p-3">
                  <button type="button" id="cancel2" class="btn btn-primary" data-bs-toggle="modal" 
                    data-bs-target="#modalPending" data-campsite-id="<%= campsite.id %>">
                    Cancel Booking
                  </button>
                </div>
              </div>
            </div>
      </div>
    </div>

    <!-- Modal for Pending -->
    <div class="modal fade" id="modalPending" tabindex="-1" aria-labelledby="modalPendingLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalPendingLabel">Cancel the Booking</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Are you sure you want to cancel the booking?
          </div>
          <div class="modal-footer">
            <button type="button" id="cancel4" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" id="delete2" class="btn btn-primary">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer placeholder -->
  <%- include('templates/footer') %>
